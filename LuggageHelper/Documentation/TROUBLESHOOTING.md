# 故障排除指南

## 概述

本文档提供 LuggageHelper 应用常见问题的解决方案，特别是照片识别增强功能的故障排除指南。

## 📸 照片识别问题

### 识别准确率低

#### 问题描述
AI 识别的物品信息不准确或置信度很低。

#### 可能原因
- 图片质量不佳（模糊、光线不足）
- 物品在图片中占比过小
- 背景过于复杂干扰识别
- 物品类型不在训练数据范围内
- 网络连接不稳定影响API调用

#### 解决方案

**立即解决**
1. **重新拍摄照片**
   ```
   - 确保光线充足，避免阴影
   - 物品占据照片至少50%的面积
   - 使用纯色或简单背景
   - 保持相机稳定，避免模糊
   ```

2. **使用图像增强功能**
   ```
   - 应用会自动检测图片质量
   - 对于质量不佳的图片会自动增强
   - 可以在设置中调整增强强度
   ```

3. **提供更多信息**
   ```
   - 在识别时添加物品类别提示
   - 输入品牌和型号信息
   - 使用多角度拍摄
   ```

**长期优化**
1. **学习最佳拍摄技巧**
   - 参考应用内的拍摄指南
   - 练习不同光线条件下的拍摄
   - 了解不同物品的最佳拍摄角度

2. **利用用户反馈功能**
   - 对识别结果进行评价和修正
   - 系统会学习并改进后续识别
   - 定期查看识别历史和改进建议

### 多物品识别混乱

#### 问题描述
一张照片中有多个物品时，识别结果混乱或错误。

#### 可能原因
- 物品之间距离太近或重叠
- 物品大小差异过大
- 相似物品难以区分
- 检测算法参数需要调整

#### 解决方案

**拍摄技巧优化**
```swift
// 推荐的多物品拍摄布局
物品间距：至少5cm
排列方式：网格状或一字排开
背景选择：纯色背景（白色或灰色最佳）
光线要求：均匀照明，避免阴影
```

**使用专门功能**
1. **批量识别模式**
   - 进入"批量识别"功能
   - 系统会自动检测并标记所有物品
   - 可以选择性识别特定物品

2. **实时识别模式**
   - 使用实时相机功能
   - 逐个对准物品进行识别
   - 避免多物品同时处理的复杂性

3. **区域选择功能**
   - 手动选择要识别的物品区域
   - 排除干扰物品和背景
   - 提高单个物品的识别精度

### 实时识别卡顿

#### 问题描述
实时相机识别功能响应缓慢、卡顿或崩溃。

#### 可能原因
- 设备性能不足
- 内存使用过高
- 检测频率设置过高
- 其他应用占用相机资源
- 设备过热

#### 解决方案

**性能优化设置**
```swift
// 推荐的性能设置
检测间隔：1.0-2.0秒（根据设备性能调整）
最小置信度：0.6（过滤低质量检测）
最大检测数：10个（避免过多对象处理）
省电模式：在电量低时启用
```

**系统级优化**
1. **释放系统资源**
   - 关闭其他使用相机的应用
   - 清理后台运行的应用
   - 重启设备释放内存

2. **调整应用设置**
   - 降低检测频率到1.5-2.0秒
   - 启用省电模式
   - 关闭不必要的视觉效果

3. **设备维护**
   - 确保设备不过热
   - 检查可用存储空间
   - 更新到最新系统版本

### 离线识别不可用

#### 问题描述
网络断开时无法使用离线识别功能。

#### 可能原因
- 离线模型未下载
- 模型文件损坏
- 存储空间不足
- 模型版本过旧

#### 解决方案

**模型管理**
1. **下载离线模型**
   ```
   设置 → AI功能 → 离线模型管理
   选择需要的模型类别下载
   确保有足够存储空间（约200MB）
   ```

2. **验证模型完整性**
   ```
   检查模型下载状态
   重新下载损坏的模型
   清理缓存后重新下载
   ```

3. **模型更新**
   ```
   定期检查模型更新
   下载最新版本模型
   删除过期的旧模型
   ```

**功能限制说明**
```
离线模式支持的功能：
✅ 基础物品分类（20+常见类别）
✅ 简单属性识别（颜色、材质）
✅ 基础重量估算

离线模式不支持：
❌ 详细规格识别
❌ 品牌型号识别
❌ 复杂物品分析
❌ 个性化建议
```

## 🔧 系统和配置问题

### API 连接失败

#### 问题描述
无法连接到AI服务，显示网络错误或认证失败。

#### 诊断步骤
```swift
// 连接诊断清单
1. 检查网络连接
   - WiFi或移动数据是否正常
   - 尝试访问其他网络服务
   - 检查防火墙设置

2. 验证API配置
   - API密钥是否正确
   - 基础URL是否正确
   - 账户是否有足够余额

3. 测试连接
   - 使用应用内"测试连接"功能
   - 查看详细错误信息
   - 检查服务器状态
```

#### 解决方案

**配置检查**
```
正确的配置示例：
API密钥：sk-xxxxxxxxxxxxxxxxxxxxxxxx
基础URL：https://api.siliconflow.cn/v1
模型：gpt-3.5-turbo 或 claude-3-haiku
```

**网络问题**
1. **网络连接**
   - 切换WiFi和移动数据测试
   - 检查网络代理设置
   - 尝试重启网络连接

2. **防火墙设置**
   - 检查企业网络限制
   - 确保允许HTTPS连接
   - 联系网络管理员

**API问题**
1. **密钥验证**
   - 重新生成API密钥
   - 检查密钥权限设置
   - 确认账户状态正常

2. **服务状态**
   - 查看服务提供商状态页面
   - 检查是否有维护通知
   - 联系技术支持

### 缓存问题

#### 问题描述
缓存占用空间过大或缓存数据损坏。

#### 缓存管理
```swift
// 缓存类型和大小限制
内存缓存：最大50个结果
磁盘缓存：最大100MB
图片缓存：最大200MB
模型缓存：约200MB

// 清理策略
自动清理：7天未使用的缓存
手动清理：设置 → 缓存管理
智能清理：存储空间不足时自动清理
```

#### 解决方案

**缓存清理**
1. **手动清理**
   ```
   设置 → AI功能 → 缓存管理
   选择要清理的缓存类型
   确认清理操作
   ```

2. **自动清理设置**
   ```
   调整缓存过期时间
   设置最大缓存大小
   启用智能清理功能
   ```

3. **存储空间管理**
   ```
   检查设备可用空间
   删除不必要的文件
   移动照片到云存储
   ```

### 性能问题

#### 问题描述
应用运行缓慢、内存使用过高或电量消耗快。

#### 性能监控
```swift
// 性能指标监控
内存使用：正常<200MB，警告>300MB
CPU使用：正常<30%，警告>50%
电量消耗：每小时<10%
响应时间：识别<5秒，缓存<1秒
```

#### 优化建议

**内存优化**
1. **减少并发操作**
   - 避免同时处理多个大图片
   - 限制批量识别的数量
   - 及时释放不用的资源

2. **图片处理优化**
   - 压缩大图片后再处理
   - 使用适当的图片质量设置
   - 避免保存过多原始图片

**电量优化**
1. **省电模式设置**
   ```
   启用省电模式
   降低检测频率
   减少后台处理
   关闭不必要的动画
   ```

2. **使用习惯优化**
   - 避免长时间使用实时识别
   - 及时关闭相机预览
   - 在充电时进行批量处理

## 🔍 调试和诊断工具

### 内置诊断功能

#### 系统信息查看
```
设置 → 关于 → 系统信息
- 应用版本和构建号
- 设备型号和系统版本
- 可用存储空间
- 网络连接状态
```

#### 性能监控
```
设置 → AI功能 → 性能监控
- 实时内存使用情况
- API调用统计
- 缓存命中率
- 错误日志查看
```

#### 缓存统计
```
设置 → AI功能 → 缓存管理
- 各类缓存大小
- 缓存命中率统计
- 最近访问记录
- 清理建议
```

### 日志和错误报告

#### 错误日志查看
```swift
// 日志级别
DEBUG：详细调试信息
INFO：一般信息记录
WARNING：警告信息
ERROR：错误信息
CRITICAL：严重错误
```

#### 错误报告生成
```
设置 → 帮助与支持 → 生成错误报告
包含内容：
- 错误日志（最近24小时）
- 系统配置信息
- 性能统计数据
- 用户操作记录（匿名）
```

## 📞 获取帮助

### 自助解决
1. **应用内帮助**
   - 查看功能使用指南
   - 观看操作演示视频
   - 阅读常见问题解答

2. **社区支持**
   - 用户交流群
   - 在线论坛讨论
   - 经验分享平台

### 技术支持
1. **联系方式**
   - 邮箱：support@luggagehelper.com
   - 在线客服：工作日9:00-18:00
   - 技术论坛：https://forum.luggagehelper.com

2. **问题反馈**
   - GitHub Issues：报告Bug和功能请求
   - 应用内反馈：设置 → 反馈与建议
   - 用户调研：参与产品改进调研

### 紧急情况处理
```
如果遇到以下严重问题：
- 应用频繁崩溃
- 数据丢失
- 安全问题
- 隐私泄露

请立即联系：
紧急邮箱：emergency@luggagehelper.com
电话支持：400-xxx-xxxx（工作日）
```

---

**提示**：大多数问题可以通过重启应用、清理缓存或检查网络连接来解决。如果问题持续存在，请联系技术支持并提供详细的错误信息。